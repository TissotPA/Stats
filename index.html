<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stats PRF</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"></script>
</head>
<body>
    <div class="container">
        <!-- En-tête -->
        <header class="header">
            <div class="header-content">
                <h1><i class="fas fa-basketball-ball"></i> PRF</h1>
                <div class="header-actions">
                    <button class="btn btn-primary" id="loadBtn" title="Charger les données depuis stats.json">
                        <i class="fas fa-sync-alt"></i> Charger
                    </button>
                    <button class="btn btn-secondary" id="exportBtn" title="Exporter les données">
                        <i class="fas fa-download"></i> Exporter
                    </button>
                    <label for="importFile" class="btn btn-secondary" title="Importer des données">
                        <i class="fas fa-upload"></i> Importer
                        <input type="file" id="importFile" accept=".json" style="display: none;">
                    </label>
                    <button class="btn btn-secondary" id="clearDataBtn" title="Effacer toutes les données">
                        <i class="fas fa-trash"></i> Effacer
                    </button>
                    <button class="btn btn-primary" id="addMatchBtn">
                        <i class="fas fa-plus"></i> Ajouter un match
                    </button>
                </div>
            </div>
        </header>

        <!-- Navigation -->
        <nav class="nav">
            <button class="nav-btn active" data-tab="dashboard">
                <i class="fas fa-home"></i> Accueil
            </button>
            <button class="nav-btn" data-tab="players">
                <i class="fas fa-users"></i> Joueuses
            </button>
            <button class="nav-btn" data-tab="comparison">
                <i class="fas fa-balance-scale"></i> Comparaison
            </button>
            <button class="nav-btn" data-tab="evolution">
                <i class="fas fa-chart-area"></i> Évolution
            </button>
            <button class="nav-btn" data-tab="team">
                <i class="fas fa-chart-line"></i> Équipe
            </button>
            <button class="nav-btn" data-tab="matches">
                <i class="fas fa-calendar"></i> Matchs
            </button>
        </nav>

        <!-- Contenu principal -->
        <main class="main">
            <!-- Section Tableau de bord -->
            <section id="dashboard" class="tab-content active">
                <div class="section-header">
                    <h2>Tableau de bord PRF</h2>
                    <div class="dashboard-date">
                        <i class="fas fa-calendar-alt"></i>
                        <span id="currentDate"></span>
                    </div>
                </div>
                
                <!-- Résumé rapide -->
                <div class="dashboard-summary">
                    <div class="summary-card">
                        <div class="summary-icon"><i class="fas fa-trophy"></i></div>
                        <div class="summary-content">
                            <div class="summary-value" id="dashboardRecord">0-0</div>
                            <div class="summary-label">Bilan saison</div>
                        </div>
                    </div>
                    <div class="summary-card">
                        <div class="summary-icon"><i class="fas fa-calendar-check"></i></div>
                        <div class="summary-content">
                            <div class="summary-value" id="dashboardMatches">0</div>
                            <div class="summary-label">Matchs joués</div>
                        </div>
                    </div>
                    <div class="summary-card">
                        <div class="summary-icon"><i class="fas fa-chart-line"></i></div>
                        <div class="summary-content">
                            <div class="summary-value" id="dashboardAvgPoints">0.0</div>
                            <div class="summary-label">Points/match</div>
                        </div>
                    </div>
                    <div class="summary-card">
                        <div class="summary-icon"><i class="fas fa-star"></i></div>
                        <div class="summary-content">
                            <div class="summary-value" id="dashboardTopPlayer">-</div>
                            <div class="summary-label">Top scoreuse</div>
                        </div>
                    </div>
                </div>

                <!-- Derniers matchs -->
                <div class="dashboard-section">
                    <h3><i class="fas fa-history"></i> Derniers matchs</h3>
                    <div class="recent-matches" id="recentMatches">
                        <!-- Généré par JavaScript -->
                    </div>
                </div>

                <!-- Performances récentes -->
                <div class="dashboard-section">
                    <h3><i class="fas fa-fire"></i> Performances récentes</h3>
                    <div class="performance-highlights" id="performanceHighlights">
                        <!-- Généré par JavaScript -->
                    </div>
                </div>

                <!-- Graphique tendance rapide -->
                <div class="dashboard-section">
                    <h3><i class="fas fa-chart-area"></i> Tendance récente</h3>
                    <div class="quick-chart-container">
                        <canvas id="dashboardChart"></canvas>
                    </div>
                </div>

                <!-- Leaders par statistiques -->
                <div class="dashboard-section">
                    <h3><i class="fas fa-crown"></i> Leaders par statistiques</h3>
                    <div class="leaders-grid" id="leadersGrid">
                        <!-- Généré par JavaScript -->
                    </div>
                </div>
            </section>

            <!-- Section Joueuses -->
            <section id="players" class="tab-content">
                <div class="section-header">
                    <h2>Statistiques des Joueuses</h2>
                    <div class="search-box">
                        <i class="fas fa-search"></i>
                        <input type="text" id="playerSearch" placeholder="Rechercher une joueuse...">
                    </div>
                </div>
                <div class="players-grid" id="playersGrid">
                    <!-- Les cartes des joueuses seront générées par JavaScript -->
                </div>
                

            </section>

            <!-- Section Comparaison -->
            <section id="comparison" class="tab-content">
                <div class="section-header">
                    <h2><i class="fas fa-balance-scale"></i> Comparaison entre Joueuses</h2>
                    <p class="section-description">Comparez les performances de 2 à 3 joueuses côte à côte</p>
                </div>
                
                <!-- Sélection des joueuses -->
                <div class="comparison-controls">
                    <div class="player-selectors">
                        <div class="player-selector-group">
                            <label for="comparePlayer1">Joueuse 1 :</label>
                            <select id="comparePlayer1" class="comparison-select">
                                <option value="">-- Sélectionner --</option>
                            </select>
                        </div>
                        <div class="player-selector-group">
                            <label for="comparePlayer2">Joueuse 2 :</label>
                            <select id="comparePlayer2" class="comparison-select">
                                <option value="">-- Sélectionner --</option>
                            </select>
                        </div>
                        <div class="player-selector-group">
                            <label for="comparePlayer3">Joueuse 3 (optionnelle) :</label>
                            <select id="comparePlayer3" class="comparison-select">
                                <option value="">-- Sélectionner --</option>
                            </select>
                        </div>
                    </div>
                    <button id="resetComparison" class="btn btn-secondary">
                        <i class="fas fa-refresh"></i> Réinitialiser
                    </button>
                </div>

                <!-- Message d'état -->
                <div id="comparisonMessage" class="comparison-message">
                    <i class="fas fa-info-circle"></i>
                    Sélectionnez au moins 2 joueuses pour commencer la comparaison
                </div>

                <!-- Graphique radar -->
                <div id="comparisonRadarSection" class="comparison-section" style="display: none;">
                    <div class="section-header">
                        <h3><i class="fas fa-chart-area"></i> Comparaison visuelle</h3>
                    </div>
                    <div class="radar-chart-container">
                        <canvas id="comparisonRadarChart"></canvas>
                    </div>
                </div>

                <!-- Tableau de comparaison -->
                <div id="comparisonTableSection" class="comparison-section" style="display: none;">
                    <div class="section-header">
                        <h3><i class="fas fa-table"></i> Comparaison détaillée</h3>
                    </div>
                    <div class="comparison-table-container">
                        <table id="comparisonTable" class="comparison-table">
                            <!-- Généré par JavaScript -->
                        </table>
                    </div>
                </div>

                <!-- Graphique d'évolution multi-joueuses -->
                <div id="comparisonEvolutionSection" class="comparison-section" style="display: none;">
                    <div class="section-header">
                        <h3><i class="fas fa-chart-line"></i> Évolution comparative</h3>
                    </div>
                    
                    <div class="comparison-evolution-controls">
                        <div class="stats-selector">
                            <label>Statistique à afficher :</label>
                            <div class="stats-checkboxes">
                                <div class="checkbox-group">
                                    <input type="radio" name="comparison-stat" id="comparison-stat-points" value="points" checked>
                                    <label for="comparison-stat-points">Points/match</label>
                                </div>
                                <div class="checkbox-group">
                                    <input type="radio" name="comparison-stat" id="comparison-stat-minutes" value="minutes">
                                    <label for="comparison-stat-minutes">Minutes/match</label>
                                </div>
                                <div class="checkbox-group">
                                    <input type="radio" name="comparison-stat" id="comparison-stat-fouls" value="fouls">
                                    <label for="comparison-stat-fouls">Fautes/match</label>
                                </div>
                                <div class="checkbox-group">
                                    <input type="radio" name="comparison-stat" id="comparison-stat-pointsPerMinute" value="pointsPerMinute">
                                    <label for="comparison-stat-pointsPerMinute">Points/minute</label>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="comparison-evolution-chart-container">
                        <canvas id="comparisonEvolutionChart"></canvas>
                    </div>
                </div>
            </section>

            <!-- Section Évolution individuelle -->
            <section id="evolution" class="tab-content">
                <div class="section-header">
                    <h2>Évolution individuelle</h2>
                </div>
                
                <div class="evolution-controls">
                    <div class="player-selector">
                        <label for="evolutionPlayerSelect">Sélectionner une joueuse :</label>
                        <select id="evolutionPlayerSelect">
                            <option value="">-- Choisir une joueuse --</option>
                        </select>
                    </div>
                </div>

                <div class="evolution-radar-container" id="evolutionRadarContainer" style="display: none;">
                    <h3>Profil de performance</h3>
                    <div class="radar-chart-wrapper">
                        <canvas id="evolutionRadarChart"></canvas>
                    </div>
                </div>

                <div class="evolution-controls">
                    <div class="stats-selector" id="statsSelector" style="display: none;">
                        <label>Statistiques à afficher :</label>
                        <div class="stats-checkboxes">
                            <div class="checkbox-group">
                                <input type="checkbox" id="stat-points" value="points">
                                <label for="stat-points">Points/match</label>
                            </div>
                            <div class="checkbox-group">
                                <input type="checkbox" id="stat-minutes" value="minutes">
                                <label for="stat-minutes">Minutes/match</label>
                            </div>
                            <div class="checkbox-group">
                                <input type="checkbox" id="stat-fouls" value="fouls">
                                <label for="stat-fouls">Fautes/match</label>
                            </div>
                            <div class="checkbox-group">
                                <input type="checkbox" id="stat-pointsPerMinute" value="pointsPerMinute">
                                <label for="stat-pointsPerMinute">Points/minute</label>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="evolution-chart-container" id="evolutionChartContainer" style="display: none;">
                    <canvas id="evolutionChart"></canvas>
                </div>

                <div class="evolution-matches" id="evolutionMatches" style="display: none;">
                    <h3>Historique des matchs</h3>
                    <div class="matches-table-container">
                        <table class="matches-table">
                            <thead>
                                <tr>
                                    <th>Date</th>
                                    <th>Adversaire</th>
                                    <th>Points</th>
                                    <th>Minutes</th>
                                    <th>Fautes</th>
                                    <th>Points/min</th>
                                </tr>
                            </thead>
                            <tbody id="evolutionMatchesBody">
                                <!-- Les données des matchs seront ajoutées ici -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- Section Équipe -->
            <section id="team" class="tab-content">
                <div class="section-header">
                    <h2>Statistiques de l'Équipe</h2>
                </div>
                <div class="team-stats" id="teamStats">
                    <!-- Les statistiques d'équipe seront générées par JavaScript -->
                </div>
                
                <!-- Section Graphiques -->
                <div class="charts-section">
                    <div class="section-header">
                        <h2>Évolution des performances</h2>
                    </div>
                    <div class="chart-controls">
                        <div class="chart-options">
                            <label class="chart-option">
                                <input type="checkbox" id="chart-points-scored" value="points-scored" checked>
                                <span class="checkmark" style="background-color: #3b82f6;"></span>
                                Points marqués/match
                            </label>
                            <label class="chart-option">
                                <input type="checkbox" id="chart-points-conceded" value="points-conceded">
                                <span class="checkmark" style="background-color: #ef4444;"></span>
                                Points encaissés/match
                            </label>
                            <label class="chart-option">
                                <input type="checkbox" id="chart-free-throws" value="free-throws">
                                <span class="checkmark" style="background-color: #22c55e;"></span>
                                % Lancers francs
                            </label>
                            <label class="chart-option">
                                <input type="checkbox" id="chart-ranking" value="ranking">
                                <span class="checkmark" style="background-color: #f59e0b;"></span>
                                Classement général
                            </label>
                            <label class="chart-option">
                                <input type="checkbox" id="chart-attack-ranking" value="attack-ranking">
                                <span class="checkmark" style="background-color: #8b5cf6;"></span>
                                Classement attaque
                            </label>
                            <label class="chart-option">
                                <input type="checkbox" id="chart-defense-ranking" value="defense-ranking">
                                <span class="checkmark" style="background-color: #06b6d4;"></span>
                                Classement défense
                            </label>
                        </div>
                    </div>
                    <div class="chart-container">
                        <canvas id="performanceChart"></canvas>
                    </div>
                </div>
            </section>

            <!-- Section Matchs -->
            <section id="matches" class="tab-content">
                <div class="section-header">
                    <h2>Historique des Matchs</h2>
                </div>
                <div class="matches-list" id="matchesList">
                    <!-- La liste des matchs sera générée par JavaScript -->
                </div>
            </section>
        </main>
    </div>

    <!-- Modal pour ajouter un match -->
    <div class="modal" id="addMatchModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitle">Ajouter un nouveau match</h3>
                <button class="modal-close" id="closeModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="matchForm">
                    <!-- Informations générales du match -->
                    <div class="form-section">
                        <h4>Informations du match</h4>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="opponent">Adversaire</label>
                                <input type="text" id="opponent" name="opponent" required>
                            </div>
                            <div class="form-group">
                                <label for="matchDate">Date</label>
                                <input type="date" id="matchDate" name="matchDate" required>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="location">Lieu</label>
                                <select id="location" name="location" required>
                                    <option value="domicile">Domicile</option>
                                    <option value="exterieur">Extérieur</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="result">Résultat</label>
                                <select id="result" name="result" required>
                                    <option value="victoire">Victoire</option>
                                    <option value="defaite">Défaite</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="ourScore">Notre score</label>
                                <input type="number" id="ourScore" name="ourScore" min="0" required>
                            </div>
                            <div class="form-group">
                                <label for="opponentScore">Score adversaire</label>
                                <input type="number" id="opponentScore" name="opponentScore" min="0" required>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="freeThrowsMade">Lancers francs réussis</label>
                                <input type="number" id="freeThrowsMade" name="freeThrowsMade" min="0" value="0">
                            </div>
                            <div class="form-group">
                                <label for="freeThrowsAttempted">Lancers francs tentés</label>
                                <input type="number" id="freeThrowsAttempted" name="freeThrowsAttempted" min="0" value="0">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="ranking">Classement général</label>
                                <input type="number" id="ranking" name="ranking" min="1" placeholder="ex: 5">
                            </div>
                            <div class="form-group">
                                <label for="attackRanking">Classement attaque</label>
                                <input type="number" id="attackRanking" name="attackRanking" min="1" placeholder="ex: 3">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="defenseRanking">Classement défense</label>
                                <input type="number" id="defenseRanking" name="defenseRanking" min="1" placeholder="ex: 7">
                            </div>
                            <div class="form-group">
                                <!-- Champ vide pour l'alignement -->
                            </div>
                        </div>
                        
                        <!-- Option pour exclure les stats individuelles -->
                        <div class="form-row">
                            <div class="form-group full-width">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="excludeIndividualStats" name="excludeIndividualStats">
                                    <span class="checkbox-custom"></span>
                                    Exclure les statistiques individuelles des calculs (stats d'équipe conservées)
                                </label>
                                <small class="form-hint">
                                    Cochez cette case si les statistiques individuelles sont erronées. 
                                    Le résultat du match et les stats d'équipe (%, points) seront conservés.
                                </small>
                            </div>
                        </div>
                    </div>

                    <!-- Statistiques des joueuses -->
                    <div class="form-section">
                        <h4>Statistiques des joueuses</h4>
                        <div class="players-stats-form" id="playersStatsForm">
                            <!-- Les champs pour chaque joueuse seront générés par JavaScript -->
                        </div>
                    </div>

                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" id="cancelMatch">Annuler</button>
                        <button type="submit" class="btn btn-primary" id="submitMatchBtn">Enregistrer le match</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="script.js"></script>
</body>
</html>